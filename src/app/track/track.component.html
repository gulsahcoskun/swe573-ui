<div *ngIf="isLoggedIn; else loggedOut">
    <mat-tab-group mat-stretch-tabs class="example-stretched-tabs mat-elevation-z4">

        <mat-tab label="Track As Student">
            <h6 style="text-align:center; margin-top: 2%">Material Name - Completion Ratio</h6>

            <div style="display: block" class="chart">
                <canvas baseChart
                        [data]="studentCompletionRatio"
                        [labels]="studentMaterialNames"
                        [chartType]="pieChartType"
                        [colors]="colors">

                </canvas>
            </div>


            <br/>

            <mat-form-field>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
            </mat-form-field>

            <table mat-table [dataSource]="studentDataSource" class="mat-elevation-z8">

                <!-- Position Column -->
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef> No. </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <!-- Material Column -->
                <ng-container matColumnDef="materialName">
                    <th mat-header-cell *matHeaderCellDef> Material Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.materialName}} </td>
                </ng-container>

                <!-- Content Column -->
                <ng-container matColumnDef="contentName">
                    <th mat-header-cell *matHeaderCellDef> Content Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.contentName}} </td>
                </ng-container>

                <!-- Number Of Try Column -->
                <ng-container matColumnDef="numberOfTry">
                    <th mat-header-cell *matHeaderCellDef> Number Of Try </th>
                    <td mat-cell *matCellDef="let element"> {{element.numberOfTry}} </td>
                </ng-container>

                <!-- Success Ratio Column -->
                <ng-container matColumnDef="successRatio">
                    <th mat-header-cell *matHeaderCellDef> Success Ratio </th>
                    <td mat-cell *matCellDef="let element"> {{element.successRatio}} </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="studentDisplayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: studentDisplayedColumns;"></tr>
            </table>


        </mat-tab>

        <mat-tab label="Track As Teacher">
            <h6 style="text-align:center; margin-top: 2%">Material Name - Enrolled Student Count</h6>

            <div style="display: block" class="chart">
                <canvas baseChart
                        [data]="teacherStudentCounts"
                        [labels]="teacherMaterialNames"
                        [chartType]="pieChartType"
                        [colors]="colors">

                </canvas>
            </div>


            <br/>

            <mat-form-field>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
            </mat-form-field>

            <table mat-table [dataSource]="teacherDataSource" class="mat-elevation-z8">

                <!-- Position Column -->
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef> No. </th>
                    <td mat-cell *matCellDef="let element"> {{element.position}} </td>
                </ng-container>

                <!-- Material Column -->
                <ng-container matColumnDef="materialName">
                    <th mat-header-cell *matHeaderCellDef> Material Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.materialName}} </td>
                </ng-container>

                <!-- Content Column -->
                <ng-container matColumnDef="contentName">
                    <th mat-header-cell *matHeaderCellDef> Content Name </th>
                    <td mat-cell *matCellDef="let element"> {{element.contentName}} </td>
                </ng-container>

                <!-- Number Of Try Column -->
                <ng-container matColumnDef="numberOfTry">
                    <th mat-header-cell *matHeaderCellDef> Number Of Try </th>
                    <td mat-cell *matCellDef="let element"> {{element.numberOfTry}} </td>
                </ng-container>

                <!-- Success Ratio Column -->
                <ng-container matColumnDef="successRatio">
                    <th mat-header-cell *matHeaderCellDef> Success Ratio </th>
                    <td mat-cell *matCellDef="let element"> {{element.successRatio}} </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="studentDisplayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: studentDisplayedColumns;"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>



        </mat-tab>
    </mat-tab-group>




</div>

<ng-template #loggedOut>
    {{router.navigateByUrl('/auth/login')}}
</ng-template>